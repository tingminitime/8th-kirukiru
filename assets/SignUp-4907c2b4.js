var e=Object.defineProperty,s=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,l=(e,l)=>{for(var n in l||(l={}))a.call(l,n)&&r(e,n,l[n]);if(s)for(var n of s(l))t.call(l,n)&&r(e,n,l[n]);return e};import{_ as n}from"./LoadingSpin-fa9aedbf.js";import{_ as i}from"./FormInputSelect-7c610425.js";import{_ as o}from"./FormInputText-a0715cf6.js";import{ap as d,aq as c,ar as m,r as u,ai as p,s as f,o as g,c as b,d as h,e as x,w as v,D as y,t as w,l as S,a as I,am as U,x as _,C as j,T as V,h as B,an as P}from"./vendor-358810ac.js";import{c as k,a as M,b as T,d as E}from"./object-fe354ed4.js";import{s as O}from"./setLocale-f7bd91f3.js";import{_ as q,e as L,f as F}from"./index-fe723f3a.js";O({mixed:{default:"無效的輸入",required:"必填欄位"},string:{min:"長度不可小於 ${min}",email:"須符合 Email 格式 !"}});const $={name:"SignUpModal",components:{FormInputText:o,FormInputSelect:i,LoadingSpin:n,Switch:d,SwitchGroup:c,SwitchLabel:m},props:{isOpen:{type:Boolean,default:!1}},data:()=>({schema:k().shape({"register-email":M().email().required(),"register-name":M().required(),"register-username":M().required(),"register-password":M().min(6).required(),"register-confirm_password":M().required().oneOf([T("register-password"),null],"密碼需一致 !"),"register-articlecategoryId":k().shape().nullable().required("請至少選擇一項興趣 !"),"register-agree":E().oneOf([!0],"必填 !")}),interest:null,interestList:[],params:{userName:"",passWord:"",name:"",email:"",articlecategoryId:null},agreeTerms:!1,receiveMail:!1,isFormValid:!1,isInvalidAniProcess:null,signUpProcess:!1,signUpErrorMsg:""}),mounted(){L().then((e=>{this.interestList=e.data})).catch((e=>{}))},methods:{onSubmit(e){if(this.signUpProcess)return;this.isFormValid=!0,this.signUpProcess=!0;const r={};for(const s in e){const a=s.includes("-")?s.split("-"):s;r[a[a.length-1]]=e[s]}const n=r,{confirm_password:i,articlecategoryId:o}=n,d=((e,r)=>{var l={};for(var n in e)a.call(e,n)&&r.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&s)for(var n of s(e))r.indexOf(n)<0&&t.call(e,n)&&(l[n]=e[n]);return l})(n,["confirm_password","articlecategoryId"]);let c=l({articlecategoryId:o.Id},d);F(c).then((e=>{e.data.success?(this.$notify({group:"success",title:"註冊成功 !",text:`${e.data.message}`},2500),this.$router.push({name:"SignUpComplete"})):(this.signUpErrorMsg=e.data.message,this.$notify({group:"error",title:"註冊失敗 !",text:`${e.data.message}`},2500)),this.signUpProcess=!1})).catch((e=>{this.signUpProcess=!1}))},onInvalidSubmit(e){this.isFormValid=!1,this.isInvalidAniProcess=!0},animationEndHandler(){this.isInvalidAniProcess=!1}}},A=h("div",{class:"py-6 border-b-myBrown md:py-4 md:bg-myYellow md:border-b-2"},[h("h1",{class:"text-2xl font-bold text-center text-myBrown select-none"}," 切切會員註冊 ")],-1),Y={class:"overflow-x-hidden h-auto bg-myGray md:h-[60vh]"},H={class:"px-10 pb-6 md:pt-10 md:pb-8"},z={class:"relative mb-8"},G={class:"absolute -bottom-6 left-0 m-0 text-sm text-red-500"},N={class:"relative my-4"},C={class:"flex items-center"},D=h("span",{class:"font-bold text-myBrown"},[_(" 您是否同意 "),h("a",{href:"javascript:;",class:"text-xl hover:text-myYellow underline underline-offset-4"}," 切切規範 "),_(" ? ")],-1),W=h("span",{class:"sr-only"},"您是否同意切切規範",-1),J={class:"absolute top-1/2 -right-4 m-0 text-sm text-red-500 -translate-x-full -translate-y-1/2"},K={class:"my-4"},Q={class:"flex items-center"},R=h("span",{class:"font-bold text-myBrown"},"您是否願意收到電子信 ?",-1),X=h("span",{class:"sr-only"},"您是否願意收到電子信",-1),Z={class:"flex justify-center py-2"},ee={key:0,class:"text-red-500"},se={class:"flex flex-col justify-center items-center mt-2"},ae=["disabled"],te={class:"block mt-8 font-bold text-center text-myBrown md:hidden"},re=_(" 已經有帳號了 ? "),le=h("span",{class:"inline-block underline underline-offset-4"},"點我登入",-1),ne=h("span",{class:"align-sub material-icons"},"arrow_forward",-1);const ie={name:"SignUp",components:{SignUpModal:q($,[["render",function(e,s,a,t,r,l){const d=o,c=i,m=u("v-field"),_=u("SwitchLabel"),j=u("Switch"),V=u("SwitchGroup"),B=n,P=u("router-link"),k=u("v-form"),M=p("invalid");return f((g(),b("div",{class:"overflow-hidden h-full ring-myBrown md:w-96 md:h-auto md:rounded-xl md:ring-2 md:shadow-xl md:drop-shadow-2xl",onAnimationend:s[4]||(s[4]=U(((...e)=>l.animationEndHandler&&l.animationEndHandler(...e)),["stop"]))},[A,h("div",Y,[h("div",H,[x(k,{"validation-schema":r.schema,onSubmit:l.onSubmit,onInvalidSubmit:l.onInvalidSubmit},{default:v((()=>[x(d,{focus:!0,name:"register-email",type:"email",label:"Email",placeholder:"Email",class:"mb-10","success-message":""}),x(d,{name:"register-name",type:"text",label:"暱稱",placeholder:"暱稱",class:"mb-10","success-message":""}),x(d,{name:"register-username",type:"text",label:"帳號",placeholder:"帳號",class:"mb-10","success-message":""}),x(d,{name:"register-password",type:"password",label:"密碼",placeholder:"密碼",class:"mb-10","success-message":""}),x(d,{name:"register-confirm_password",type:"password",label:"再次輸入密碼",placeholder:"再次輸入密碼",class:"mb-10","success-message":""}),h("div",z,[x(m,{modelValue:r.interest,"onUpdate:modelValue":s[0]||(s[0]=e=>r.interest=e),name:"register-articlecategoryId"},{default:v((({field:e,errorMessage:s})=>[x(c,y({options:r.interestList},e,{"key-prop":"Name","label-prop":"Name","default-text":"請選擇一項興趣主題"}),null,16,["options"]),h("span",G,w(s),1)])),_:1},8,["modelValue"])]),h("div",N,[x(m,{modelValue:r.agreeTerms,"onUpdate:modelValue":s[2]||(s[2]=e=>r.agreeTerms=e),name:"register-agree"},{default:v((({errorMessage:e})=>[x(V,null,{default:v((()=>[h("div",C,[x(_,{class:"w-48 select-none"},{default:v((()=>[D])),_:1}),x(j,{modelValue:r.agreeTerms,"onUpdate:modelValue":s[1]||(s[1]=e=>r.agreeTerms=e),class:S([r.agreeTerms?"bg-myYellow":"bg-white","mySwitchBar"])},{default:v((()=>[W,h("span",{class:S([r.agreeTerms?"translate-x-8":"translate-x-0","mySwitchButton"])},null,2)])),_:1},8,["modelValue","class"])])])),_:1}),h("span",J,w(e),1)])),_:1},8,["modelValue"])]),h("div",K,[x(V,null,{default:v((()=>[h("div",Q,[x(_,{class:"w-48 select-none"},{default:v((()=>[R])),_:1}),x(j,{modelValue:r.receiveMail,"onUpdate:modelValue":s[3]||(s[3]=e=>r.receiveMail=e),class:S([r.receiveMail?"bg-myYellow":"bg-white","mySwitchBar"])},{default:v((()=>[X,h("span",{class:S([r.receiveMail?"translate-x-8":"translate-x-0","mySwitchButton"])},null,2)])),_:1},8,["modelValue","class"])])])),_:1})]),h("div",Z,[r.signUpErrorMsg?(g(),b("span",ee,w(r.signUpErrorMsg),1)):I("",!0)]),h("div",se,[h("button",{type:"submit",class:S(["relative button-lg",[r.agreeTerms&&!r.signUpProcess?"myButtonValid myButtonValidHover":"myButtonInvalid"]]),disabled:!r.agreeTerms&&!r.signUpProcess},[x(B,{class:"absolute top-3 left-5 w-5 h-5 text-white align-middle",show:r.signUpProcess},null,8,["show"]),h("span",null,w(r.signUpProcess?"請稍後...":"註冊"),1)],10,ae)]),h("p",te,[re,x(P,{class:"text-xl hover:text-black",to:{name:"SignIn"}},{default:v((()=>[le,ne])),_:1})])])),_:1},8,["validation-schema","onSubmit","onInvalidSubmit"])])])],32)),[[M,r.isInvalidAniProcess]])}]])},computed:l({},j(["userSignInStatus"]))},oe={class:"flex relative justify-center items-center"},de={class:"overflow-hidden min-h-[calc(100vh-56px-64px)] md:grid md:grid-cols-2 md:gap-11"},ce={class:"z-20 my-auto ml-auto"},me=h("div",{class:"relative z-10 py-4 my-auto"},[h("div",{class:"hidden overflow-hidden max-w-[500px] rounded-xl border-2 border-myBrown -translate-x-1/2 md:flex md:justify-center md:items-center md:max-w-[768px] md:max-h-[75vh]"},[h("img",{class:"block object-cover w-full h-full scale-105",src:"/8th-kirukiru/assets/signup-bg-20f4ac1f.svg",alt:"signin background image"})])],-1),ue={key:0,class:"hidden absolute right-0 bottom-0 z-10 p-2 px-12 w-full font-bold text-right text-myBrown bg-myYellow md:block"},pe=_(" 已經有帳號了 ? "),fe=h("span",{class:"inline-block underline underline-offset-4"},"點我登入",-1),ge=h("span",{class:"align-sub material-icons"},"arrow_forward",-1);var be=q(ie,[["render",function(e,s,a,t,r,l){const n=u("router-link");return g(),b("div",oe,[h("div",de,[h("div",ce,[x(V,{appear:"",mode:"out-in","enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform opacity-0 translate-x-48","enter-to-class":"transform opacity-100 translate-x-0","leave-active-class":"transition duration-300 ease-in","leave-from-class":"transform opacity-100 translate-x-0","leave-to-class":"transform opacity-0 -translate-x-48"},{default:v((()=>[(g(),B(P("SignUpModal")))])),_:1})]),me]),e.userSignInStatus?I("",!0):(g(),b("p",ue,[pe,x(n,{class:"text-xl hover:text-black",to:{name:"SignIn"}},{default:v((()=>[fe,ge])),_:1})]))])}]]);export{be as default};
