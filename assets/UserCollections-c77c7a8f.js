var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(e,a,i)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i,n=(t,n)=>{for(var l in n||(n={}))a.call(n,l)&&o(t,l,n[l]);if(e)for(var l of e(n))i.call(n,l)&&o(t,l,n[l]);return t};import{L as l,aL as s,r,o as c,c as g,d as p,F as d,f as u,h as m,D as h,e as y,aJ as f,a as b,w,ap as C,aq as L,ar as v,m as x,l as M,T as A,an as P,aN as V}from"./vendor-358810ac.js";import{a1 as S,a2 as k,_ as H,E as j,a3 as I,a4 as z,a5 as B}from"./index-7ca2f26b.js";/* empty css             *//* empty css                  */import{_ as E}from"./MyArticleItem-654626fc.js";const K={class:"relative min-h-[606px]"},O={class:"flex justify-center py-4"},$={key:0,class:"text-lg text-center text-myBrown/40"};const D={class:"relative min-h-[606px]"},F={class:"flex justify-center py-4"},T={key:0,class:"text-lg text-center text-myBrown/40"};const _={name:"UserCollections",components:{Switch:C,SwitchGroup:L,SwitchLabel:v,MyCollectKiruArticles:H({name:"MyCollectKiruArticles",components:{Loading:l,MyArticleItem:E,ElPagination:s},props:{},emits:["is-loading"],data:()=>({kiruArticleList:[],paginationVm:{currentPage:1,pageSize:5,total:0},paginationStyle:{"--el-pagination-bg-color":"#ededeb","--el-pagination-button-disabled-bg-color":"#ededeb","--el-pagination-hover-color":"#FF7F24"},isLoading:!1}),watch:{"paginationVm.currentPage":{handler(t){this.getKiruCollectionsHandler(this.paginationVm.currentPage)},immediate:!0}},methods:{getKiruCollectionsHandler(t){this.isLoading=!0,S({nowpage:t,showcount:this.paginationVm.pageSize}).then((t=>{t.data.success?(this.paginationVm.total=t.data.total,this.kiruArticleList=t.data.data):this.$notify({group:"error",title:"切切文章取得失敗"}),this.isLoading=!1})).catch((t=>{}))},deleteMyCollectionHandler(t){this.isLoading=!0,k(t.articleId).then((t=>{t.data.success?(this.$notify({group:"normal",title:"已取消收藏"}),this.getKiruCollectionsHandler(this.paginationVm.currentPage)):(this.$notify({group:"error",title:"取消收藏失敗"}),this.isLoading=!1)})).catch((t=>{}))}}},[["render",function(t,e,a,i,o,l){const C=E,L=s,v=j,x=r("Loading");return c(),g("div",K,[p("ul",null,[(c(!0),g(d,null,u(o.kiruArticleList,(e=>(c(),m(C,h({key:e.artId},n(n({},e),t.$attrs),{"show-feature":!0,"show-edit":!1,"show-delete":!0,"show-author":!0,"title-link":"ArticleKiru",onDeleteArticle:l.deleteMyCollectionHandler}),null,16,["onDeleteArticle"])))),128))]),p("div",O,[y(L,{currentPage:o.paginationVm.currentPage,"onUpdate:currentPage":e[0]||(e[0]=t=>o.paginationVm.currentPage=t),style:f([o.paginationStyle]),layout:"prev, pager, next","page-size":o.paginationVm.pageSize,"pager-count":7,total:o.paginationVm.total,"hide-on-single-page":!0},null,8,["currentPage","style","page-size","total"])]),0!==o.kiruArticleList.length||o.isLoading?b("",!0):(c(),g("div",$," 沒有任何文章 ")),y(x,{active:o.isLoading,"onUpdate:active":e[1]||(e[1]=t=>o.isLoading=t),"is-full-page":!1,"background-color":"#EDEDEB"},{default:w((()=>[y(v,{class:"la-2x",show:o.isLoading},null,8,["show"])])),_:1},8,["active"])])}]]),MyCollectCommonArticles:H({name:"MyCollectKiruArticles",components:{Loading:l,MyArticleItem:E,ElPagination:s},props:{},emits:["is-loading"],data:()=>({commonArticleList:[],paginationVm:{currentPage:1,pageSize:5,total:0},paginationStyle:{"--el-pagination-bg-color":"#ededeb","--el-pagination-button-disabled-bg-color":"#ededeb","--el-pagination-hover-color":"#FF7F24"},isLoading:!1}),watch:{"paginationVm.currentPage":{handler(t){this.getCommonCollectionsHandler(this.paginationVm.currentPage)},immediate:!0}},methods:{getCommonCollectionsHandler(t){this.isLoading=!0,I({nowpage:t,showcount:this.paginationVm.pageSize}).then((t=>{t.data.success?(this.paginationVm.total=t.data.total,this.commonArticleList=t.data.data):this.$notify({group:"error",title:"一般文章取得失敗"}),this.isLoading=!1})).catch((t=>{}))},deleteMyCollectionHandler(t){this.isLoading=!0,z(t.articleId).then((t=>{t.data.success?(this.$notify({group:"normal",title:"已取消收藏"}),this.getCommonCollectionsHandler(this.paginationVm.currentPage)):(this.$notify({group:"error",title:"取消收藏失敗"}),this.isLoading=!1)})).catch((t=>{}))}}},[["render",function(t,e,a,i,o,l){const C=E,L=s,v=j,x=r("Loading");return c(),g("div",D,[p("ul",null,[(c(!0),g(d,null,u(o.commonArticleList,(e=>(c(),m(C,h({key:e.artId},n(n({},e),t.$attrs),{"show-feature":!0,"show-edit":!1,"show-delete":!0,"show-author":!0,"title-link":"ArticleCommon",onDeleteArticle:l.deleteMyCollectionHandler}),null,16,["onDeleteArticle"])))),128))]),p("div",F,[y(L,{currentPage:o.paginationVm.currentPage,"onUpdate:currentPage":e[0]||(e[0]=t=>o.paginationVm.currentPage=t),style:f([o.paginationStyle]),layout:"prev, pager, next","page-size":o.paginationVm.pageSize,"pager-count":7,total:o.paginationVm.total,"hide-on-single-page":!0},null,8,["currentPage","style","page-size","total"])]),0!==o.commonArticleList.length||o.isLoading?b("",!0):(c(),g("div",T," 沒有任何文章 ")),y(x,{active:o.isLoading,"onUpdate:active":e[1]||(e[1]=t=>o.isLoading=t),"is-full-page":!1,"background-color":"#EDEDEB"},{default:w((()=>[y(v,{class:"la-2x",show:o.isLoading},null,8,["show"])])),_:1},8,["active"])])}]])},data:()=>({articleType:"MyCollectKiruArticles",isInit:!1,openMyCollections:!1}),computed:n({},x(["userInfo"])),mounted(){this.openMyCollections=this.userInfo.isCollect},methods:{onChangeOpenMyCollections(){this.openMyCollections=!this.openMyCollections,this.changeMyCollectionsOpenHandler(this.openMyCollections)},changeMyCollectionsOpenHandler(t){B(t).then((t=>{t.data.success?this.$notify({group:"normal",title:"修改成功"}):this.$notify({group:"error",title:"修改失敗"})})).catch((t=>{}))}}},U={class:"w-full"},Y=p("h2",{class:"mb-8 text-2xl font-bold text-myBrown"}," 收藏總覽 ",-1),G={class:"flex gap-3 mb-8"},q=p("span",{class:"font-bold text-myBrown"}," 是否公開你的文章收藏 ? ",-1),J={class:"flex items-center"},N=p("span",{class:"sr-only"},"您是否同意切切規範",-1),Q={class:"flex gap-3 items-center mb-6"};var R=H(_,[["render",function(t,e,a,i,o,n){const l=r("Switch"),s=r("SwitchGroup");return c(),g("div",U,[Y,p("div",G,[q,y(s,null,{default:w((()=>[p("div",J,[y(l,{value:o.openMyCollections,class:M([o.openMyCollections?"bg-myYellow":"bg-white","mySwitchBar"]),onClick:n.onChangeOpenMyCollections},{default:w((()=>[N,p("span",{class:M([o.openMyCollections?"translate-x-8":"translate-x-0","mySwitchButton"])},null,2)])),_:1},8,["value","class","onClick"])])])),_:1})]),p("div",Q,[p("button",{type:"button",class:M(["py-1 px-2 min-w-[144px] font-bold text-myBrown rounded-lg",["MyCollectKiruArticles"===o.articleType?"bg-myYellow":"bg-white md:hover:bg-myLightenYellow/60"]]),onClick:e[0]||(e[0]=t=>o.articleType="MyCollectKiruArticles")}," 切切文章 ",2),p("button",{type:"button",class:M(["py-1 px-2 min-w-[144px] font-bold text-myBrown rounded-lg",["MyCollectCommonArticles"===o.articleType?"bg-myYellow":"bg-white md:hover:bg-myLightenYellow/60"]]),onClick:e[1]||(e[1]=t=>o.articleType="MyCollectCommonArticles")}," 一般文章 ",2)]),p("div",null,[y(A,{appear:"",mode:"out-in","enter-active-class":"transition duration-300 ease-out","enter-from-class":"transform opacity-0 translate-x-48","enter-to-class":"transform opacity-100 translate-x-0"},{default:w((()=>[(c(),m(V,null,[(c(),m(P(o.articleType)))],1024))])),_:1})])])}]]);export{R as default};
